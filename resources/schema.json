{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "title": {
      "title": "Titel",
      "type": "string"
    },
    "elements": {
      "title": "Elemente",
      "type": "array",
      "Q:options": {
        "expandable": {
          "itemLabelProperty": "type"
        }
      },
      "items": {
        "oneOf": [
          {"$ref": "#/definitions/cover"},
          {"$ref": "#/definitions/multipleChoice"},
          {"$ref": "#/definitions/numberGuess"},
          {"$ref": "#/definitions/mapPointGuess"},
          {"$ref": "#/definitions/lastCard"}
        ]
      }
    }
  },   
  "required": [
    "title"
  ],
  "definitions": {
    "cover": {
      "type": "object",
      "title": "Cover",
      "properties": {
        "id": {"$ref": "#/definitions/elementId"},
        "type": {
          "type": "string",
          "default": "cover",
          "enum": ["cover"],
          "Q:options": {
            "hideInEditor": true
          }
        },
        "title": {
          "type": "string",
          "title": "Titel"
        }
      }
    },
    "multipleChoice": {
      "type": "object",
      "title": "Multiple Choice",
      "properties": {
        "id": {"$ref": "#/definitions/elementId"},
        "type": {
          "type": "string",
          "default": "multipleChoice",
          "enum": ["multipleChoice"],
          "Q:options": {
            "hideInEditor": true
          }
        },
        "question": {
          "type": "string",
          "title": "Frage"
        },
        "choices": {
          "type": "array",
          "title": "Antwortmöglichkeiten",
          "items": {
            "type": "string",
            "title": "Antwortmöglichkeit"
          }
        },
        "answer": {
          "type": "string",
          "title": "Korrekte Antwort"
        },
        "answerText": {
          "type": "string",
          "title": "Ausformulierte Antwort"
        },
        "notes": {
          "type": "string",
          "title": "Anmerkungen"
        },
        "image": {"$ref": "#/definitions/image"},
        "articleRecommendations": {"$ref": "#/definitions/articleRecommendations"}
      }
    },
    "numberGuess": {
      "type": "object",
      "title": "Zahl schätzen",
      "properties": {
        "id": {"$ref": "#/definitions/elementId"},
        "type": {
          "type": "string",
          "default": "numberGuess",
          "enum": ["numberGuess"],
          "Q:options": {
            "hideInEditor": true
          }
        },
        "question": {
          "type": "string",
          "title": "Frage"
        },
        "unit": {
          "type": "string",
          "title": "Einheit Plural"
        },
        "unit_singular": {
          "type": "string",
          "title": "Einheit Singular (nur falls abweichend von Einheit Plural)"
        },
        "min": {
          "type": "number",
          "title": "Minimalwert"
        },
        "max": {
          "type": "number",
          "title": "Maximalwert"
        },
        "step": {
          "type": "number",
          "title": "Grösse der Zwischenschritte"
        },
        "answer": {
          "type": "string",
          "title": "Korrekte Antwort"
        },
        "answerText": {
          "type": "string",
          "title": "Ausformulierte Antwort"
        },
        "notes": {
          "type": "string",
          "title": "Anmerkungen"
        },
        "image": {"$ref": "#/definitions/image"},
        "articleRecommendations": {"$ref": "#/definitions/articleRecommendations"}
      }
    },
    "mapPointGuess": {
      "type": "object",
      "title": "Ort schätzen",
      "properties": {
        "id": {"$ref": "#/definitions/elementId"},
        "type": {
          "type": "string",
          "default": "mapPointGuess",
          "enum": ["mapPointGuess"],
          "Q:options": {
            "hideInEditor": true
          }
        },
        "question": {
          "type": "string",
          "title": "Frage"
        },
        "answer": {
          "type": "object",
          "title": "Korrekte Antwort",
          "properties": {
            "lat": {
              "type": "number"
            },
            "lng": {
              "type": "number"
            }
          }
        },
        "bbox": {
          "type": "string"
        },
        "answerText": {
          "type": "string",
          "title": "Ausformulierte Antwort"
        },
        "notes": {
          "type": "string",
          "title": "Anmerkungen"
        },
        "image": {"$ref": "#/definitions/image"},
        "articleRecommendations": {"$ref": "#/definitions/articleRecommendations"}
      }
    },
    "lastCard": {
      "type": "object",
      "title": "letzte Seite",
      "properties": {
        "id": {"$ref": "#/definitions/elementId"},
        "type": {
          "type": "string",
          "default": "lastCard",
          "enum": ["lastCard"],
          "Q:options": {
            "hideInEditor": true
          }
        },
        "title": {
          "type": "string",
          "title": "Titel"
        },
        "text": {
          "type": "string",
          "title": "Text"
        },
        "quizLink": {
          "type": "string",
          "title": "Link zu Anschlussquiz"
        },
        "quizTitle": {
          "type": "string",
          "title": "Titel Anschlussquiz"
        },
        "articleRecommendations": {"$ref": "#/definitions/articleRecommendations"}
      }
    },
    "elementId": {
      "type": "string",
      "title": "ID",
      "Q:options": {
        "hideInEditor": true
      }
    },
    "articleRecommendations": {
      "type": "array",
      "title": "Artikelempfehlungen",
      "items": {
        "type": "object",
        "title": "Artikelempfehlung",
        "properties": {
          "text": {
            "type": "string",
            "title": "Anmoderation"
          },
          "articleId": {
            "type": "string",
            "title": "Artikel ID"
          }
        }
      }
    },
    "image": {
      "type": "object",
      "title": "Bild",
      "properties": {
        "url": {
          "type": "string",
          "title": "URL zum Bild"
        }
      }
    }
  }
}
